# MAKEFILE FOR DOCS

##===============================================================================
# Variables
IMGDIR = ./img
SRC   := $(shell find . -type f -name "*.org")					# Source files
UML   := $(wildcard $(IMGDIR)/*.puml)
PNG   := $(patsubst %.puml, %.png, $(UML))
PDF   := $(patsubst %.org, %.pdf, $(SRC))

##===============================================================================
# Recipes

##-------------------------------------------------------------------------------
#
all: png pdf

##-------------------------------------------------------------------------------
#
png: $(PNG)
	make -j4 -C $(IMGDIR) png

##-------------------------------------------------------------------------------
#
pdf:
	emacs -Q --script build-paper.el

##-------------------------------------------------------------------------------
#
clean:
	rm -f $(PDF) $(PNG)

##===============================================================================
#

##-------------------------------------------------------------------------------
#
%.png: %.puml
	@
