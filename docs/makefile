# MAKEFILE FOR DOCS

##===============================================================================
# Variables
UMLDIR = ./uml
SRC   := $(wildcard *.org)
UML   := $(wildcard $(UMLDIR)/*.puml)
PNG   := $(patsubst %.puml, %.png, $(UML))
PDF   := $(patsubst %.org, %.pdf, $(SRC))

##===============================================================================
# Recipes

##-------------------------------------------------------------------------------
#
all: png pdf

##-------------------------------------------------------------------------------
#
png: $(PNG)
	make -j4 -C $(UMLDIR) png

##-------------------------------------------------------------------------------
#
pdf: $(PDF)

##-------------------------------------------------------------------------------
#
clean:
	rm -f $(PDF) $(PNG)

##===============================================================================
#

##-------------------------------------------------------------------------------
#
%.pdf: %.org
	emacs -Q --script build-paper.el

##-------------------------------------------------------------------------------
#
%.png: %.puml
	@
