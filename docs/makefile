# MAKEFILE FOR DOCS

##===============================================================================
# Variables
IMGDIR = ./img
UMLDIR = ./uml
SRC   := $(wildcard *.md)
PNG   := $(wildcard $(IMGDIR)/*.png)
PDF   := $(patsubst %.md, %.pdf, $(SRC))

##===============================================================================
# Recipes

##-------------------------------------------------------------------------------
#
all: png pdf

##-------------------------------------------------------------------------------
#
png: $(PNG)
	make -j4 -C $(UMLDIR) png

##-------------------------------------------------------------------------------
#
pdf: $(PDF)

##-------------------------------------------------------------------------------
#
clean:
	rm -f $(PDF) $(PNG)

##===============================================================================
#

##-------------------------------------------------------------------------------
#
%.pdf: %.md
	pandoc --pdf-engine=xelatex "$<" -o $@
