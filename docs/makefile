# MAKEFILE FOR DOCS

##===============================================================================
# Variables
UMLDIR = ./uml
SRC   := $(wildcard *.md)
UML   := $(wildcard $(UMLDIR)/*.puml)
PNG   := $(patsubst %.puml, %.png, $(UML))
PDF   := $(patsubst %.md, %.pdf, $(SRC))

##===============================================================================
# Recipes

##-------------------------------------------------------------------------------
#
all: png pdf

##-------------------------------------------------------------------------------
#
png: $(PNG)
	make -j4 -C $(UMLDIR) png

##-------------------------------------------------------------------------------
#
pdf: $(PDF)

##-------------------------------------------------------------------------------
#
clean:
	rm -f $(PDF) $(PNG)

##===============================================================================
#

##-------------------------------------------------------------------------------
#
%.pdf: %.md
	pandoc --pdf-engine=xelatex "$<" -o $@

##-------------------------------------------------------------------------------
#
%.png: %.puml
	@
